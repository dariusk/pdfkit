<!DOCTYPE html>
<html>
<head>
    <title>Vector Graphics in PDFKit</title>
    <script>
    if(location.host !== "pdfkit.org") location.href='http://pdfkit.org' + location.pathname.slice(7)
    </script>
    <link href='http://fonts.googleapis.com/css?family=News+Cycle' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="../index.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
    <script src="../scroll.js"></script>
</head>
<body>
    <nav class="sidebar">
        <ul>
            <li><a href="../index.html">Home</a></li>
            <li><a href="getting_started.html">Documentation</a>
                <ul>
                    <li><a href="getting_started.html">Getting Started</a></li>
                    <li><a href="#top" class="selected">Vector Graphics</a>
                        <ul>
                            <li><a href="#basic_shapes">Basic Shapes</a></li>
                            <li><a href="#svg_paths">SVG Paths</a></li>
                            <li><a href="#shape_helpers">Shape Helpers</a></li>
                            <li><a href="#styling">Styling</a></li>
                            <li><a href="#transformations">Transformations</a></li>
                            <li><a href="#clipping">Clipping</a></li>
                        </ul>
                    </li>
                    <li><a href="text.html">Text</a></li>
                    <li><a href="images.html">Images</a></li>
                    <li><a href="annotations.html">Annotations</a></li>
                </ul>
            </li>
            <li><a href="guide.pdf">PDF Guide</a></li>
            <li><a href="../example.pdf">Example PDF</a></li>
            <li><a href="http://github.com/devongovett/pdfkit">Source Code</a></li>
        </ul>
    </nav>
    
    <a href="https://github.com/devongovett/pdfkit"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"></a>
    
    <div class="main">
        <h1><a name="top">Vector Graphics in PDFKit</a></h1>
        
        <h2>An introduction to vector graphics</h2>
        <p>Unlike images which are defined by pixels, vector graphics are defined through a series of drawing commands.  This makes vector graphics
            scalable to any size without a reduction in quality (pixelization).  The PDF format was designed with vector graphics in mind, so
            creating vector drawings is very easy.  The PDFKit vector graphics APIs are very similar to that of the HTML5 canvas element, so
            if you are familiar at all with that API, you will find PDFKit easy to pick up.</p>
            
        <h2><a name="basic_shapes">Creating basic shapes</a></h2>
        <p>Shapes are defined by a series of lines and curves.  <code>lineTo</code>, <code>bezierCurveTo</code> and <code>quadraticCurveTo</code>
            all draw from the current point (which you can set with <code>moveTo</code>)  to the specified point (always the last two arguments).
            Bezier curves use two control points and quadratic curves use just one.  Here is an example that illustrates defining a path.</p>
        <script src="https://gist.github.com/1074661.js?file=paths.coffee"></script>
        <p>The output of this example looks like this:</p>
        <img src="images/path.png">
        <p>One thing to notice about this example is the use of method chaining.  All methods in PDFKit are chainable, meaning that you 
            can call one method right after the other without referencing the <code>doc</code> variable again.  Of course, this is an option, so
            if you don't like how the code looks when chained, you don't have to write it that way.</p>
            
        <h2><a name="svg_paths">SVG paths</a></h2>
        <p>PDFKit includes an SVG path parser, so you can include paths written in the SVG path syntax in your PDF documents.  This makes it simple
            to include vector graphics elements produced in many popular editors such as Inkscape or Adobe Illustrator.  The previous example could 
            also be written using the SVG path syntax like this.</p>
        <script src="https://gist.github.com/1074661.js?file=svg.coffee"></script>
        <p>The PDFKit SVG parser supports all of the command types supported by SVG, so any valid SVG path you throw at it should 
            work as expected.</p>
        
        <h2><a name="shape_helpers">Shape helpers</a></h2>
        <p>PDFKit also includes some helpers that make defining common shapes much easier.  Here is a list of the helpers.</p>
        <ul>
            <li><code>rect(x, y, width, height)</code></li>
            <li><code>roundedRect(x, y, width, height, cornerRadius)</code></li>
            <li><code>ellipse(centerX, centerY, radiusX, radiusY = radiusX)</code></li>
            <li><code>circle(centerX, centerY, radius)</code></li>
            <li><code>polygon(points...)</code></li>
        </ul>
        <p>The last one, <code>polygon</code>, allows you to pass in a list of points (arrays of x,y pairs), and it will create the shape by
            moving to the first point, and then drawing lines to each consecutive point.  Here is how you'd draw a triangle with the polygon
            helper.</p>
        <script src="https://gist.github.com/1074661.js?file=polygon.coffee"></script>
        <p>The output of this example looks like this:</p>
        <img src="images/triangle.png">
        
        <h2><a name="styling">Fill and stroke styles</a></h2>
        <p>So far we have only been stroking our paths, but you can also fill them with the <code>fill</code> method, and both fill and stroke
            the same path with the <code>fillAndStroke</code> method.  Note that calling <code>fill</code> and then <code>stroke</code>
            consecutively will not work because of a limitation in the PDF spec.  Use the <code>fillAndStroke</code> method if you want to 
            accomplish both operations on the same path.</p>
        <p>In order to make our drawings interesting, we really need to give them some style.  PDFKit has many methods designed to do just that.</p>
        <ul>
            <li><code>lineWidth</code></li>
            <li><code>lineCap</code></li>
            <li><code>lineJoin</code></li>
            <li><code>miterLimit</code></li>
            <li><code>dash</code></li>
            <li><code>fillColor</code></li>
            <li><code>strokeColor</code></li>
            <li><code>opacity</code></li>
            <li><code>fillOpacity</code></li>
            <li><code>strokeOpacity</code></li>
        </ul>
        
        <p>Some of these are pretty self explanatory, but let's go through a few of them.</p>
        
        <h3>Line cap and line join</h3>
        <p>The <code>lineCap</code> and <code>lineJoin</code> 
            properties accept constants describing what they should do.  This is best illustrated by an example.</p>
        <script src="https://gist.github.com/1074661.js?file=line_style.coffee"></script>
        <p>The output of this example, with some text labeling each style, looks like this.</p>
        <img src="images/line_styles.png">
        
        <h3>Dashed lines</h3>
        <p>The <code>dash</code> method allows you to create non-continuous dashed lines.  It takes a length specifying how long each dash should
            be, as well as an optional hash describing the additional properties <code>space</code> and <code>phase</code>.  The <code>space</code>
            option defines the length of the space between each dash, and the <code>phase</code> option defines the starting point of the sequence
            of dashes.  By default the <code>space</code> attribute is equal to the <code>length</code> and the <code>phase</code> attribute is 
            set to <code>0</code>.  You can use the <code>undash</code> method to make the line solid again.</p>
        <p>The following example draws a circle with a dashed line where the space between the dashes is double the length of each dash.</p>
        <script src="https://gist.github.com/1074661.js?file=dash.coffee"></script>
        <p>The output of this example looks like this:</p>
        <img src="images/dash.png">
        
        <h3>Color</h3>
        <p>What is a drawing without color?  PDFKit makes it simple to set the fill and stroke color and opacity.  You can pass an array specifying
            an RGB or CMYK color, a hex color string, or use any of the named CSS colors.  The <code>fillColor</code> and <code>strokeColor</code> 
            methods accept an optional second argument as a shortcut for setting the <code>fillOpacity</code> and <code>strokeOpacity</code>.  
            Finally, the <code>opacity</code> method is a convenience method that sets both the fill and stroke opacity to the same value.  The 
            <code>fill</code> and <code>stroke</code> methods also accept a color as an argument so that you don't have to call 
            <code>fillColor</code> or <code>strokeColor</code> beforehand.  The <code>fillAndStroke</code> method accepts both fill and 
            stroke colors as arguments.</p>
        <script src="https://gist.github.com/1074661.js?file=color.coffee"></script>
        <p>This example produces the following output:</p>
        <img src="images/color.png">
        
        <h3>Winding rules</h3>
        <p>Winding rules define how a path is filled and are best illustrated by an example.  The winding rule is an optional attribute to the
            <code>fill</code> and <code>fillAndStroke</code> methods, and there are two values to choose from: <code>non-zero</code> and 
            <code>even-odd</code>.</p>
        <script src="https://gist.github.com/1074963.js?file=winding_rules.coffee"></script>
        <p>You'll notice that I used the <code>scale</code> and <code>translate</code> transformations in this example.  We'll cover those in a 
            minute.  The output of this example, with some added labels, is below.</p>
        <img src="images/winding_rules.png">
        
        <h3>Saving and restoring the graphics stack</h3>
        <p>Once you start producing more complex vector drawings, you will want to be able to save and restore the state of the graphics context.  
            The graphics state is basically a snapshot of all the styles and transformations (see below) that have been applied, and many states 
            can be created and stored on a stack.  Every time the <code>save</code> method is called, the current graphics state is pushed onto 
            the stack, and when you call <code>restore</code>, the last state on the stack is applied to the context again.  This way, you can 
            save the state, change some styles, and then restore it to how it was before you made those changes.
            
        <h2><a name="transformations">Transformations</a></h2>
        <p>Transformations allow you to modify the look of a drawing without modifying the drawing itself.  There are three types of transformations
            available, as well as a method for setting the transformation matrix yourself.  They are <code>translate</code>, <code>rotate</code> 
            and <code>scale</code>.</p>
        <p>The <code>translate</code> transformation takes two arguments, x and y, and effectively moves the origin of the document which is (0, 0) 
            by default, to the left and right x and y units.</p>
        <p>The <code>rotate</code> transformation takes an angle and optionally, an object with an <code>origin</code> property.  It rotates the 
            document <code>angle</code> degrees around the passed <code>origin</code> or by default, the center of the page.</p>
        <p>The <code>scale</code> transformation takes a scale factor and an optional <code>origin</code> passed in an options hash as with the 
            <code>rotate</code> transformation.  It is used to increase or decrease the size of the units in the drawing, or change it's size.  
            For example, applying a scale of <code>0.5</code> would make the drawing appear at half size, and a scale of <code>2</code> would
            make it appear twice as large.</p>
        <p>If you are feeling particularly smart, you can modify the transformation matrix yourself using the <code>transform</code> method.</p>
        <p>We used the <code>scale</code> and <code>translate</code> transformations above, so here is an example of using the <code>rotate</code>
            transformation.  We'll set the origin of the rotation to the center of the rectangle.</p>
        <script src="https://gist.github.com/1074963.js?file=rotate.coffee"></script>
        <p>This example produces the following effect.</p>
        <img src="images/rotate.png">
        
        <h2><a name="clipping">Clipping</a></h2>
        <p>A clipping path is a path defined using the normal path creation methods, but instead of being filled or stroked, it becomes a mask that
            hides unwanted parts of the drawing.  Everything falling inside the clipping path after it is created is visible, and everything outside 
            the path is invisible.  Here is an example that clips a checkerboard pattern to the shape of a circle.</p>
        <script src="https://gist.github.com/1074963.js?file=clipping.coffee"></script>
        <p>The result of this example is the following:</p>
        <img src="images/clipping.png">
        
        <p>That's it for vector graphics in PDFKit.  Now let's move on to learning about PDFKit's text support!</p>
            
        <nav>
            <a href="getting_started.html" class="previous">Previous</a>
            <a href="text.html" class="next">Next</a>
        </nav>
    </div>
    
    <!-- Start of Woopra Code -->
    <script type="text/javascript">
    function woopraReady(tracker) {
        tracker.setDomain('pdfkit.org');
        tracker.setIdleTimeout(300000);
        tracker.track();
        return false;
    }
    (function() {
        var wsc = document.createElement('script');
        wsc.src = document.location.protocol+'//static.woopra.com/js/woopra.js';
        wsc.type = 'text/javascript';
        wsc.async = true;
        var ssc = document.getElementsByTagName('script')[0];
        ssc.parentNode.insertBefore(wsc, ssc);
    })();
    </script>
    <!-- End of Woopra Code -->
</body>
</html>